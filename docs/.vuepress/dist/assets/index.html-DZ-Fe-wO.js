import{_ as l,c as d,b as e,a as i,d as n,e as t,r,o as h}from"./app-9X8Nq5Gk.js";const p={},k={class:"hint-container details"},o={class:"code-block-title","data-title":"resolved.conf"},c={class:"code-block-title-bar"},g={class:"title"},u={class:"code-block-title","data-title":"smartdns.conf"},m={class:"code-block-title-bar"},b={class:"title"};function v(y,s){const a=r("VPIcon");return h(),d("div",null,[s[9]||(s[9]=e(`<h2 id="linuxå®‰è£…" tabindex="-1"><a class="header-anchor" href="#linuxå®‰è£…"><span>Linuxå®‰è£…</span></a></h2><ul><li>ä¸‹è½½é…å¥—å®‰è£…åŒ…ï¼Œå¹¶ä¸Šä¼ åˆ° Linux ç³»ç»Ÿä¸­, æ ‡å‡† Linux ç³»ç»Ÿï¼ˆX86 / X86_64ï¼‰è¯·æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tar</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> zxf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> smartdns.1.yyyy.MM.dd-REL.x86_64-linux-all.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> smartdns</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chmod</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +x</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./install</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">./install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>æ ‘è“æ´¾æˆ–å…¶ä»– Debian ç³»ç³»ç»Ÿï¼ˆARM / ARM64ï¼‰è¯·æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dpkg</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> smartdns.1.yyyy.MM.dd-REL.arm-debian-all.deb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container caution"><p class="hint-container-title">å…³æ³¨ <strong>Ubuntu</strong> ç³»ç»Ÿ <strong>53</strong> ç«¯å£å ç”¨é—®é¢˜</p><ol><li>ubuntuç³»ç»Ÿä¸‹ï¼Œ<code>systemd-resolved</code>ä¼šå ç”¨TCP53å’ŒUDP53ç«¯å£, ä½ éœ€è¦æ‰‹åŠ¨è§£å†³ç«¯å£å ç”¨é—®é¢˜æˆ–è€…ä¿®æ”¹smartdnsç›‘å¬ç«¯å£ã€‚</li><li>æ—¥å¿—æ–‡ä»¶åœ¨<code>/var/log/smartdns/smartdns.log</code></li></ol></div>`,6)),i("details",k,[s[5]||(s[5]=e('<summary>è§£å†³ 53 ç«¯å£å ç”¨é—®é¢˜</summary><p>æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lsof</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i:53</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>æ–¹æ¡ˆä¸€ï¼šå…³é—­ DNS å­˜æ ¹ç›‘å¬å™¨ï¼Œä½¿å…¶ä¸å†ç›‘å¬ 53 ç«¯å£</strong></p>',4)),i("ol",null,[s[3]||(s[3]=e('<li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nano</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/systemd/resolved.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li>',1)),i("li",null,[s[2]||(s[2]=i("p",null,"å–æ¶ˆæ³¨é‡Šå¹¶ä¿®æ”¹ä»¥ä¸‹è¡Œ",-1)),i("div",o,[i("div",c,[i("span",g,[n(a,{provider:"iconify",name:"vscode-icons:file-type-config"}),s[0]||(s[0]=t("resolved.conf"))])]),s[1]||(s[1]=e(`<div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-ini"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#DNSStubListener=yes</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">DNSStubListener</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">no</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,1))])]),s[4]||(s[4]=e('<li><p>é‡å¯ <code>systemd-resolved</code> ä½¿é…ç½®ç”Ÿæ•ˆ</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> restart</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemd-resolved</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li>',1))]),s[6]||(s[6]=e('<p><strong>æ–¹æ¡ˆäºŒï¼šå…³é—­ <code>systemd-resolved</code> æœåŠ¡</strong></p><ol><li><p>ç«‹å³åœæ­¢</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemd-resolved</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>æ°¸ä¹…ç¦ç”¨</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> disable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemd-resolved</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol>',2))]),s[10]||(s[10]=e('<h2 id="ä¿®æ”¹é…ç½®" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹é…ç½®"><span>ä¿®æ”¹é…ç½®</span></a></h2><p>å®‰è£…å®Œæˆåï¼Œå¯é…ç½® SmartDNS çš„ä¸Šæ¸¸æœåŠ¡å™¨ä¿¡æ¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªéœ€è¦å¢åŠ  <code>server</code>[<code>IP</code>]<code>:port</code> å’Œ <code>server-tcp</code>[<code>IP</code>]<code>:port</code> é…ç½®é¡¹ï¼Œè¯·å°½å¯èƒ½é…ç½®å¤šä¸ªä¸Šæ¸¸ DNS æœåŠ¡å™¨ï¼ŒåŒ…æ‹¬å›½å†…å¤–çš„æœåŠ¡å™¨ã€‚å…·ä½“é…ç½®å‚æ•°è¯·å‚è€ƒ<code>é…ç½®æ–‡ä»¶</code>è¯´æ˜</p><ul><li>é…ç½®æ–‡ä»¶</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vi</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/smartdns/smartdns.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>/etc/smartdns/smartdns.conf</code>é…ç½®åŒ…å«å¦‚ä¸‹åŸºæœ¬å†…å®¹ï¼š</p>',5)),i("div",u,[i("div",m,[i("span",b,[n(a,{provider:"iconify",name:"vscode-icons:file-type-config"}),s[7]||(s[7]=t("smartdns.conf"))])]),s[8]||(s[8]=e(`<div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-ini"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># æŒ‡å®šç›‘å¬çš„ç«¯å£å·</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">bind []:53 </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># æŒ‡å®šä¸Šæ¸¸æœåŠ¡å™¨</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">server 1.1.1.1</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">server-tls 8.8.8.8</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># æŒ‡å®šåŸŸåè§„åˆ™</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">address /example.com/1.2.3.4</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">domain-rules /example.com/ -address 1.2.3.4</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,1))]),s[11]||(s[11]=e(`<h2 id="å¯åŠ¨æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨æœåŠ¡"><span>å¯åŠ¨æœåŠ¡</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> smartdns</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> smartdns</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="å°†-dns-è¯·æ±‚è½¬å‘åˆ°-smartdns-è§£æ" tabindex="-1"><a class="header-anchor" href="#å°†-dns-è¯·æ±‚è½¬å‘åˆ°-smartdns-è§£æ"><span>å°† DNS è¯·æ±‚è½¬å‘åˆ° SmartDNS è§£æ</span></a></h2><p>ä¿®æ”¹æœ¬åœ°è·¯ç”±å™¨çš„ DNS æœåŠ¡å™¨ï¼Œå°† DNS æœåŠ¡å™¨é…ç½®ä¸º SmartDNSã€‚</p><ul><li><p>ç™»å½•åˆ°æœ¬åœ°ç½‘ç»œçš„è·¯ç”±å™¨ä¸­ï¼Œé…ç½®æ ‘è“æ´¾ï¼Œåˆ†é…å…¶é™æ€ IP åœ°å€ã€‚</p></li><li><p>ä¿®æ”¹ WAN å£æˆ–è€… DHCP DNS ä¸ºæ ‘è“æ´¾ IP åœ°å€ã€‚</p><p><strong>æ³¨æ„ï¼š</strong></p><ol><li>æ¯æ¬¾è·¯ç”±å™¨é…ç½®æ–¹æ³•ä¸å°½ç›¸åŒï¼Œè¯·åœ¨ç½‘ç»œä¸Šæœç´¢å¯¹åº”é…ç½®æ–¹æ³•ã€‚ 1. åä¸ºç­‰è·¯ç”±å™¨å¯èƒ½ä¸æ”¯æŒé…ç½® DNS ä¸ºæœ¬åœ° IPï¼Œå¯ä¿®æ”¹ç”µè„‘ç«¯æˆ–æ‰‹æœºç«¯çš„ DNS æœåŠ¡å™¨ä¸ºæ ‘è“æ´¾ IPã€‚</li></ol></li></ul><h2 id="æ£€æµ‹æœåŠ¡æ˜¯å¦é…ç½®æˆåŠŸ" tabindex="-1"><a class="header-anchor" href="#æ£€æµ‹æœåŠ¡æ˜¯å¦é…ç½®æˆåŠŸ"><span>æ£€æµ‹æœåŠ¡æ˜¯å¦é…ç½®æˆåŠŸ</span></a></h2><ul><li>æ‰§è¡Œ</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">nslookup</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -querytype=ptr</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> smartdns</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>æŸ¥çœ‹å‘½ä»¤ç»“æœä¸­çš„ <code>name</code> æ˜¯å¦ä¸º <code>smartdns</code> æˆ–ä½ çš„ä¸»æœºåï¼Œå¦‚æœæ˜¯åˆ™è¡¨ç¤ºç”Ÿæ•ˆ</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>$ nslookup -querytype=ptr smartdns</span></span>
<span class="line"><span>Server:         192.168.1.1</span></span>
<span class="line"><span>Address:        192.168.1.1#53</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Non-authoritative answer:</span></span>
<span class="line"><span>smartdns        name = smartdns.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,10))])}const A=l(p,[["render",v]]),D=JSON.parse('{"path":"/article/gewr3ily/","title":"Linux ä¸‹å®‰è£… SmartDNS","lang":"zh-CN","frontmatter":{"title":"Linux ä¸‹å®‰è£… SmartDNS","createTime":"2025/04/29 19:50:51","permalink":"/article/gewr3ily/","tags":["dns","linux"],"copyright":{"creation":"pymumu","license":"CC-BY-4.0","source":"https://pymumu.github.io/smartdns/install/linux/","author":{"name":"pymumu","url":"https://pymumu.github.io/smartdns/"}},"description":"Linuxå®‰è£… ä¸‹è½½é…å¥—å®‰è£…åŒ…ï¼Œå¹¶ä¸Šä¼ åˆ° Linux ç³»ç»Ÿä¸­, æ ‡å‡† Linux ç³»ç»Ÿï¼ˆX86 / X86_64ï¼‰è¯·æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š æ ‘è“æ´¾æˆ–å…¶ä»– Debian ç³»ç³»ç»Ÿï¼ˆARM / ARM64ï¼‰è¯·æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š å…³æ³¨ Ubuntu ç³»ç»Ÿ 53 ç«¯å£å ç”¨é—®é¢˜ ubuntuç³»ç»Ÿä¸‹ï¼Œsystemd-resolvedä¼šå ç”¨TCP53å’ŒUDP53ç«¯å£, ä½ ...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Linux ä¸‹å®‰è£… SmartDNS\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-05-07T10:29:40.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://blog.hnr1.xyz/article/gewr3ily/"}],["meta",{"property":"og:site_name","content":"ğ’·ğ‘’ğ“ˆğ“‰ ğ“‚ğ’¶ğ“ƒ"}],["meta",{"property":"og:title","content":"Linux ä¸‹å®‰è£… SmartDNS"}],["meta",{"property":"og:description","content":"Linuxå®‰è£… ä¸‹è½½é…å¥—å®‰è£…åŒ…ï¼Œå¹¶ä¸Šä¼ åˆ° Linux ç³»ç»Ÿä¸­, æ ‡å‡† Linux ç³»ç»Ÿï¼ˆX86 / X86_64ï¼‰è¯·æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š æ ‘è“æ´¾æˆ–å…¶ä»– Debian ç³»ç³»ç»Ÿï¼ˆARM / ARM64ï¼‰è¯·æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š å…³æ³¨ Ubuntu ç³»ç»Ÿ 53 ç«¯å£å ç”¨é—®é¢˜ ubuntuç³»ç»Ÿä¸‹ï¼Œsystemd-resolvedä¼šå ç”¨TCP53å’ŒUDP53ç«¯å£, ä½ ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-07T10:29:40.000Z"}],["meta",{"property":"article:tag","content":"linux"}],["meta",{"property":"article:tag","content":"dns"}],["meta",{"property":"article:modified_time","content":"2025-05-07T10:29:40.000Z"}]]},"readingTime":{"minutes":2.1,"words":630},"git":{"createdTime":1746613780000,"updatedTime":1746613780000},"autoDesc":true,"filePathRelative":"3.è½¯ä»¶/2.Linux/b-software-linux-1.smartdns.md","headers":[],"categoryList":[{"id":"eac9c5","sort":3,"name":"è½¯ä»¶"},{"id":"5df0b9","sort":2,"name":"Linux"}]}');export{A as comp,D as data};
